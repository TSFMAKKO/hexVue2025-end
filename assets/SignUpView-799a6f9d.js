import{_ as x,u as _,r as a,a as y,o as v,c as g,b as o,e as C,f as u,v as m,t as V,g as S,d as U,w as h,h as k}from"./index-f47085d2.js";import{S as p}from"./sweetalert2.esm.all-263d9c0b.js";const T={id:"signUpPage",class:"bg-yellow"},B={class:"conatiner signUpPage vhContainer"},P={key:0,class:"error-message"},N="https://todolist-api.hexschool.io",q={__name:"SignUpView",setup(I){const w=_(),r=a("example333@gmail.com"),l=a("example"),n=a("example"),i=a("example333"),s=a(""),d=a(!1),b=async()=>{if(s.value="",!r.value||!i.value||!l.value||!n.value){s.value="請填寫所有欄位";return}if(l.value!==n.value){s.value="兩次輸入的密碼不一致";return}if(l.value.length<6){s.value="密碼長度至少需要6個字元";return}console.log("register"),d.value=!0;try{let e=await(await fetch(N+"/users/sign_up",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r.value,password:l.value,nickname:i.value})})).json();console.log(e),console.log(e),e.status?p.fire({title:"註冊成功",text:`${e.uid}`,icon:"success",confirmButtonText:"確定"}).then(c=>{w.push("/login")}):p.fire({title:"註冊失敗",text:`${e.message}`,icon:"error",confirmButtonText:"確定"}),d.value=!1}catch{alert("註冊失敗"),d.value=!1,p.fire({title:"註冊失敗",icon:"error",confirmButtonText:"確定"})}};return(f,e)=>{const c=y("router-link");return v(),g("div",null,[o("div",T,[o("div",B,[e[11]||(e[11]=o("div",{class:"side"},[o("a",{href:"#"},[o("img",{class:"logoImg",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/logo.png",alt:""})]),o("img",{class:"d-m-n",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/img.png",alt:"workImg"})],-1)),o("div",null,[o("form",{class:"formControls",onSubmit:C(b,["prevent"])},[e[5]||(e[5]=o("h2",{class:"formControls_txt"},"註冊帳號",-1)),e[6]||(e[6]=o("label",{class:"formControls_label",for:"email"},"Email",-1)),u(o("input",{class:"formControls_input",type:"email",id:"email","onUpdate:modelValue":e[0]||(e[0]=t=>r.value=t),placeholder:"請輸入 email",required:""},null,512),[[m,r.value]]),e[7]||(e[7]=o("label",{class:"formControls_label",for:"name"},"您的暱稱",-1)),u(o("input",{class:"formControls_input",type:"text",id:"name","onUpdate:modelValue":e[1]||(e[1]=t=>i.value=t),placeholder:"請輸入您的暱稱",required:""},null,512),[[m,i.value]]),e[8]||(e[8]=o("label",{class:"formControls_label",for:"pwd"},"密碼",-1)),u(o("input",{class:"formControls_input",type:"password",id:"pwd","onUpdate:modelValue":e[2]||(e[2]=t=>l.value=t),placeholder:"請輸入密碼",required:""},null,512),[[m,l.value]]),e[9]||(e[9]=o("label",{class:"formControls_label",for:"confirmPwd"},"再次輸入密碼",-1)),u(o("input",{class:"formControls_input",type:"password",id:"confirmPwd","onUpdate:modelValue":e[3]||(e[3]=t=>n.value=t),placeholder:"請再次輸入密碼",required:""},null,512),[[m,n.value]]),s.value?(v(),g("div",P,V(s.value),1)):S("",!0),e[10]||(e[10]=o("button",{type:"submit",class:"formControls_btnSubmit"},"註冊帳號",-1)),U(c,{to:"/login",class:"formControls_btnLink"},{default:h(()=>[...e[4]||(e[4]=[k("登入",-1)])]),_:1})],32)])])])])}}},E=x(q,[["__scopeId","data-v-8108c536"]]);export{E as default};

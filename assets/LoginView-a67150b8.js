import{_ as y,u as C,r as n,a as k,o as d,c as m,b as o,d as g,w as c,e as h,f as v,v as _,t as f,g as w,h as V,F as L}from"./index-d1a58aed.js";import{a as D}from"./axios-b5ee139b.js";const N={id:"loginPage",class:"bg-yellow"},S={class:"conatiner loginPage vhContainer"},U={class:"side"},B={key:0,class:"error-message"},T={key:1,class:"error-message"},$="https://todolist-api.hexschool.io",q={__name:"LoginView",setup(E){const b=C(),t=n("example333@gmail.com"),l=n("example"),a=n(""),r=n("false"),i=n(""),x=async()=>{if(!t.value||!l.value){a.value="請填寫所有欄位";return}console.log("登入資訊:",{email:t.value,password:l.value}),console.log("login"),r.value=!0;try{const s=await D.post($+"/users/sign_in",{email:t.value,password:l.value});console.log("res:",s.data),i.value=s.data.token,console.log(i.value),alert(`${s.data.nickname} 登入成功`),document.cookie=`token=${i.value}; expires=${new Date(Date.now()+3600*1e3).toUTCString()}; path=/`,r.value=!1,b.push("/todos")}catch(s){console.error("登入失敗:",s),r.value=!1,s.response&&s.response.data?s.value=s.response.data.message||"登入失敗，請稍後再試":s.value="登入失敗，請稍後再試";return}};return(s,e)=>{const p=k("router-link");return d(),m(L,null,[e[9]||(e[9]=o("h2",null,"登入",-1)),o("div",N,[o("div",S,[o("div",U,[g(p,{to:"/"},{default:c(()=>e[2]||(e[2]=[o("img",{class:"logoImg",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/logo.png",alt:"待辦事項"},null,-1)])),_:1,__:[2]}),e[3]||(e[3]=o("img",{class:"d-m-n",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/img.png",alt:"工作圖片"},null,-1))]),o("div",null,[o("form",{class:"formControls",onSubmit:h(x,["prevent"])},[e[5]||(e[5]=o("h2",{class:"formControls_txt"},"最實用的線上代辦事項服務",-1)),e[6]||(e[6]=o("label",{class:"formControls_label",for:"email"},"Email",-1)),v(o("input",{class:"formControls_input",type:"email",id:"email","onUpdate:modelValue":e[0]||(e[0]=u=>t.value=u),placeholder:"請輸入 email",required:""},null,512),[[_,t.value]]),a.value.email?(d(),m("span",B,f(a.value.email),1)):w("",!0),e[7]||(e[7]=o("label",{class:"formControls_label",for:"pwd"},"密碼",-1)),v(o("input",{class:"formControls_input",type:"password",id:"pwd","onUpdate:modelValue":e[1]||(e[1]=u=>l.value=u),placeholder:"請輸入密碼",required:""},null,512),[[_,l.value]]),a.value.password?(d(),m("span",T,f(a.value.password),1)):w("",!0),e[8]||(e[8]=o("button",{type:"submit",class:"formControls_btnSubmit"},"登入",-1)),g(p,{to:"/signup",class:"formControls_btnLink"},{default:c(()=>e[4]||(e[4]=[V("註冊帳號",-1)])),_:1,__:[4]})],32)])])])],64)}}},M=y(q,[["__scopeId","data-v-8a21bc99"]]);export{M as default};

import{_ as y,u as k,r as n,a as C,o as r,c as i,b as o,d as v,w as _,e as h,f,v as w,t as p,g,h as V}from"./index-495d5f18.js";import{a as L}from"./axios-b5ee139b.js";const D={id:"loginPage",class:"bg-yellow"},N={class:"conatiner loginPage vhContainer"},S={class:"side"},U={key:0,class:"error-message"},$={key:1,class:"error-message"},B={key:2,class:"error-message"},T="https://todolist-api.hexschool.io",q={__name:"LoginView",setup(E){const b=k(),a=n("example444@gmail.com"),l=n("example"),t=n({email:"",password:""}),u=n("false"),d=n(""),x=async()=>{if(!a.value||!l.value){t.value="請填寫所有欄位";return}console.log("登入資訊:",{email:a.value,password:l.value}),console.log("login"),u.value=!0;try{const s=await L.post(T+"/users/sign_in",{email:a.value,password:l.value});console.log("res:",s.data),d.value=s.data.token,console.log(d.value),alert(`${s.data.nickname} 登入成功`),document.cookie=`token=${d.value}; expires=${new Date(Date.now()+3600*1e3).toUTCString()}; path=/`,u.value=!1,b.push("/todos")}catch(s){alert(`登入失敗${s.response.data.message}`),console.error("登入失敗:",s),u.value=!1,s.response&&s.response.data?s.value.login=s.response.data.message||"登入失敗，請稍後再試":s.value.login="登入失敗，請稍後再試";return}};return(s,e)=>{const c=C("router-link");return r(),i("div",null,[o("div",D,[o("div",N,[o("div",S,[v(c,{to:"/"},{default:_(()=>e[2]||(e[2]=[o("img",{class:"logoImg",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/logo.png",alt:"待辦事項"},null,-1)])),_:1,__:[2]}),e[3]||(e[3]=o("img",{class:"d-m-n",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/img.png",alt:"工作圖片"},null,-1))]),o("div",null,[o("form",{class:"formControls",onSubmit:h(x,["prevent"])},[e[5]||(e[5]=o("h2",{class:"formControls_txt"},"最實用的線上代辦事項服務",-1)),e[6]||(e[6]=o("label",{class:"formControls_label",for:"email"},"Email",-1)),f(o("input",{class:"formControls_input",type:"email",id:"email","onUpdate:modelValue":e[0]||(e[0]=m=>a.value=m),placeholder:"請輸入 email",required:""},null,512),[[w,a.value]]),t.value.email?(r(),i("span",U,p(t.value.email),1)):g("",!0),e[7]||(e[7]=o("label",{class:"formControls_label",for:"pwd"},"密碼",-1)),f(o("input",{class:"formControls_input",type:"password",id:"pwd","onUpdate:modelValue":e[1]||(e[1]=m=>l.value=m),placeholder:"請輸入密碼",required:""},null,512),[[w,l.value]]),t.value.password?(r(),i("span",$,p(t.value.password),1)):g("",!0),t.value.login?(r(),i("span",B,p(t.value.login),1)):g("",!0),e[8]||(e[8]=o("button",{type:"submit",class:"formControls_btnSubmit"},"登入",-1)),v(c,{to:"/signup",class:"formControls_btnLink"},{default:_(()=>e[4]||(e[4]=[V("註冊帳號",-1)])),_:1,__:[4]})],32)])])])])}}},P=y(q,[["__scopeId","data-v-760527da"]]);export{P as default};

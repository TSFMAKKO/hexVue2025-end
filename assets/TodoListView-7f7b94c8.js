import{u as L,r as n,o as r,c as d,b as t,F as v,i as b,e as x,t as y}from"./index-d1a58aed.js";import{a as h}from"./axios-b5ee139b.js";const $={id:"todoListPage",class:"bg-half"},O={class:"conatiner todoListPage vhContainer"},w={class:"todoList_Content"},A={class:"todoList_list"},B={class:"todoList_items"},C={class:"todoList_item"},D={class:"todoList_label"},T=["checked","onClick"],p="https://todolist-api.hexschool.io",F={__name:"TodoListView",setup(z){const f=L(),e=n(""),u=n(""),i=n([]),g=n(null);n(""),(async()=>{console.log("checkOnline"),u.value=!0;try{const o=document.cookie.split(";");console.log("cookies:",o),e.value=o.find(l=>l.trim().startsWith("token=")).split("=")[1],e.value&&console.log("token exists:",e.value);const s=await h.get(p+"/users/checkout",{headers:{Authorization:`${e.value}`}});console.log(s.data),g.value=s.data,alert(`${s.data.nickname} 在線上`),_(),u.value=!1}catch{alert("不再線上 即將踢人"),f.push("/"),u.value=!1}})();const _=async()=>{console.log("token:",e.value);const o=await h.get(p+"/todos/",{headers:{Authorization:`${e.value}`}});console.log(o.data),o.data.data.forEach((s,l)=>{setTimeout(()=>{console.log("todo:",s),i.value.push(s)},200*l)})},k=async(o,s)=>{console.log("id:",o);const l=`${p}/todos/${o}/toggle`;console.log(l);try{const c=await h.patch(l,{},{headers:{Authorization:`${e.value}`}});let m=null;i.value.map(a=>(a.id===o&&(a.status=!a.status,m=a.status),a)),console.log(c.data)}catch{}console.log(i.value)};return(o,s)=>(r(),d(v,null,[s[6]||(s[6]=t("h1",null,"todolis",-1)),t("div",$,[s[5]||(s[5]=t("nav",null,[t("h1",null,[t("a",{href:"#"},"ONLINE TODO LIST")]),t("ul",null,[t("li",{class:"todo_sm"},[t("a",{href:"#"},[t("span",null,"王小明的代辦")])]),t("li",null,[t("a",{href:"#loginPage"},"登出")])])],-1)),t("div",O,[t("div",w,[s[4]||(s[4]=t("div",{class:"inputBox"},[t("input",{type:"text",placeholder:"請輸入待辦事項"}),t("a",{href:"#"},[t("i",{class:"fa fa-plus"})])],-1)),t("div",A,[s[3]||(s[3]=t("ul",{class:"todoList_tab"},[t("li",null,[t("a",{href:"#",class:"active"},"全部")]),t("li",null,[t("a",{href:"#"},"待完成")]),t("li",null,[t("a",{href:"#"},"已完成")])],-1)),t("div",B,[t("ul",C,[s[1]||(s[1]=t("li",null,[t("label",{class:"todoList_label"},[t("input",{class:"todoList_input",type:"checkbox",value:"true"}),t("span",null,"把冰箱發霉的檸檬拿去丟")]),t("a",{href:"#"},[t("i",{class:"fa fa-times"})])],-1)),(r(!0),d(v,null,b(i.value,l=>(r(),d("li",null,[t("label",D,[t("input",{class:"todoList_input",type:"checkbox",checked:l.status,onClick:x(c=>k(l.id),["prevent"])},null,8,T),t("span",null,y(l.content),1)]),s[0]||(s[0]=t("a",{href:"#"},[t("i",{class:"fa fa-times"})],-1))]))),256))]),s[2]||(s[2]=t("div",{class:"todoList_statistics"},[t("p",null," 5 個已完成項目")],-1))])])])])])],64))}};export{F as default};
